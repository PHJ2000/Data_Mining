연관 규칙(Association Rules)은 연관 규칙 마이닝(Association Rule Mining)의 **최종 목표이자 핵심 출력물**이며, 장바구니 모델에서 발견된 항목 간의 의존성을 'If-then' 형태로 표현하는 핵심 개념입니다.

### 1. 연관 규칙의 정의와 형식

연관 규칙은 장바구니의 내용물에 관한 "**If-then 규칙**"입니다.

*   **형식:** $\{i1, i2,…, ik\} \rightarrow j$ 형태로 표현됩니다.
*   **의미:** "장바구니가 $i1$부터 $ik$까지의 모든 항목을 포함한다면, 그것은 $j$를 포함할 가능성이 높다"는 의미를 가집니다.
*   **실제 예시:** "누군가 기저귀(diaper)와 우유(milk)를 산다면, 그 사람은 맥주(beer)를 살 가능성이 높다"거나, 아마존(Amazon)의 "X를 구매한 사람들은 Y도 구매했습니다"와 같은 형태의 규칙이 이에 해당합니다.

### 2. 연관 규칙의 측정 지표: 신뢰도와 흥미도

실제 데이터에서는 많은 규칙이 발견되므로, 유의미하거나 흥미로운 규칙을 찾기 위해 다음과 같은 측정 지표가 사용됩니다.

*   **신뢰도 (Confidence):** 규칙 $\{i1, i2,…, ik\} \rightarrow j$의 신뢰도는 품목 집합 $I = \{i1,…,ik\}$가 주어졌을 때 품목 $j$가 포함될 **조건부 확률**을 나타냅니다.
    *   신뢰도는 $I \rightarrow j$ 규칙의 지지도($Support(I \cup j)$)를 $I$의 지지도($Support(I)$)로 나눈 값입니다.
*   **흥미도 (Interest):** 신뢰도가 높다고 해서 반드시 흥미로운 규칙은 아닙니다. 예를 들어, 우유(milk)가 단순히 자주 구매되는 품목이라면(다른 항목 $X$와 독립적으로), $X \rightarrow milk$ 규칙은 신뢰도가 높을 수 있습니다.
    *   **흥미도**는 규칙 $I \rightarrow j$의 신뢰도와 $j$를 포함하는 장바구니의 비율($Pr[j]$) 간의 차이로 정의됩니다.
    *   높은 양수 또는 음수의 흥미도 값(일반적으로 0.5 이상)을 갖는 규칙이 흥미로운 규칙으로 간주됩니다.

### 3. 연관 규칙 발견 문제와 프로세스

연관 규칙 마이닝의 전체 **문제**는 **지지도 $\geq s$**와 **신뢰도 $\geq c$**를 모두 만족하는 모든 연관 규칙을 찾는 것입니다. 이 과정은 두 단계로 나누어집니다.

*   **1단계: 빈발 품목 집합 $I$ 찾기 (Finding Frequent Itemsets):** 이 단계가 가장 어렵습니다. 규칙이 높은 지지도와 신뢰도를 가지려면, 해당 규칙을 구성하는 항목 집합(왼쪽)과 전체 항목 집합 **모두** "빈발"해야 하기 때문입니다.
*   **2단계: 규칙 생성 (Rule generation):** 1단계에서 찾은 빈발 품목 집합 $I$의 모든 부분 집합 $A$에 대해, $A \rightarrow I \setminus A$ 형태의 규칙을 생성합니다. **$I$가 빈발하므로 $A$도 빈발**해야 합니다.
    *   이후 생성된 규칙들의 신뢰도를 계산하여 신뢰도 임계값($c$) 이상의 규칙만을 최종적으로 출력합니다.
    *   규칙 $A \rightarrow I \setminus A$의 신뢰도($confidence$)는 $support(I) / support(A)$로 계산됩니다.

### 4. 규칙 출력 압축

발견되는 규칙의 수를 줄이기 위해, 연관 규칙을 후처리하고 **최대 빈발 품목 집합(Maximal frequent itemsets)**이나 **닫힌 품목 집합(Closed itemsets)**만을 출력하도록 할 수 있습니다. 이는 더 많은 가지치기(pruning) 효과를 제공합니다.

연관 규칙은 발견된 의존성을 기반으로 슈퍼마켓 진열대 관리, 다이퍼 할인 시 맥주 가격 인상과 같은 연계 판매 전략을 제안하는 등 실제 비즈니스 의사결정에 사용될 수 있습니다.